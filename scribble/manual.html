<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>GAPI: Google API Discovery Service</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" pltdoc="x">GAPI:<span class="mywbr"> </span> Google API Discovery Service</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#(part._.Quick_.Start)" class="tocviewlink" pltdoc="x">Quick Start</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#(part._.General)" class="tocviewlink" pltdoc="x">General</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#(part._.Macro)" class="tocviewlink" pltdoc="x">Macro</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#(part._.Dynamic)" class="tocviewlink" pltdoc="x">Dynamic</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#(part._.Generating__.R.K.T_files)" class="tocviewlink" pltdoc="x">Generating .RKT files</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#(part._.Introduction)" class="tocsubseclink" pltdoc="x">Introduction</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#(part._.Quick_.Start)" class="tocsubseclink" pltdoc="x">Quick Start</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#(part._.General)" class="tocsubseclink" pltdoc="x">General</a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._api-key))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><span class="RktValLink">api-<wbr></wbr>key</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._list-services))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><span class="RktValLink">list-<wbr></wbr>services</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._get-discovery-document))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>discovery-<wbr></wbr>document</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._download-discovery-document))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><span class="RktValLink">download-<wbr></wbr>discovery-<wbr></wbr>document</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._load-discovery-document))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><span class="RktValLink">load-<wbr></wbr>discovery-<wbr></wbr>document</span></span></span></a></td></tr><tr><td><a href="#(form._((planet._main..rkt._(gh._gapi..plt._1._0))._paged))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><span class="RktStxLink">paged</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#(part._.Macro)" class="tocsubseclink" pltdoc="x">Macro</a></td></tr><tr><td><a href="#(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0/macro)"><span class="RktSym"><span class="RktStxLink">require-<wbr></wbr>gapi-<wbr></wbr>doc</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.1<tt>&nbsp;</tt></span><a href="#(part._service-docs)" class="tocsubseclink" pltdoc="x">Available service documents</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#(part._.Dynamic)" class="tocsubseclink" pltdoc="x">Dynamic</a></td></tr><tr><td><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><span class="RktValLink">service?</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._discovery-document-~3eservice))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><span class="RktValLink">discovery-<wbr></wbr>document-<wbr></wbr>&gt;service</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._local-discovery-document-~3eservice))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><span class="RktValLink">local-<wbr></wbr>discovery-<wbr></wbr>document-<wbr></wbr>&gt;service</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._online-discovery-document-~3eservice))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><span class="RktValLink">online-<wbr></wbr>discovery-<wbr></wbr>document-<wbr></wbr>&gt;service</span></span></span></a></td></tr><tr><td><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._method-proc))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><span class="badlink"><span class="RktValLink">method-<wbr></wbr>proc</span></span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#(part._.Generating__.R.K.T_files)" class="tocsubseclink" pltdoc="x">Generating .RKT files</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">Version: 5.3</span></div><h2><a name="(part._.G.A.P.I__.Google_.A.P.I_.Discovery_.Service)"></a>GAPI: Google API Discovery Service</h2><table cellspacing="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Introduction)" class="toptoclink" pltdoc="x">1<span class="hspace">&nbsp;</span>Introduction</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Quick_.Start)" class="toptoclink" pltdoc="x">2<span class="hspace">&nbsp;</span>Quick Start</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.General)" class="toptoclink" pltdoc="x">3<span class="hspace">&nbsp;</span>General</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Macro)" class="toptoclink" pltdoc="x">4<span class="hspace">&nbsp;</span>Macro</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._service-docs)" class="toclink" pltdoc="x">4.1<span class="hspace">&nbsp;</span>Available service documents</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Dynamic)" class="toptoclink" pltdoc="x">5<span class="hspace">&nbsp;</span>Dynamic</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Generating__.R.K.T_files)" class="toptoclink" pltdoc="x">6<span class="hspace">&nbsp;</span>Generating .RKT files</a></p></td></tr></table><h3>1<tt>&nbsp;</tt><a name="(part._.Introduction)"></a>Introduction</h3><p>The Google API Discovery service is a web service that tells you about
web services.  Each web service is described using a JSON format
"discovery document", which describes such things as the resources,
methods, and parameters for the web service.  It is possible to use
this document programatically to create Racket functions that will
make HTTP requests to the web service, as well as to make
documentation for the service. This is a great idea. And to be
appropriately meta, one of the services you can discover with the
discovery service, is the discovery service itself.</p><p>This library provides two approaches to using the discovery service
with Racket:</p><p>1. "Require" the discovery document like a source file. The wrapper
functions are created at compile time. The discovery documents are not
used at runtime and need not be shipped with your application;
essentially they are source code just like your <span class="stt">.rkt</span> files.</p><p>2. Dynamically load and parse the discovery docuemnt (from a local
file or from the Discovery web service) at runtime.</p><p>Unless you need runtime dynamism, the first approach is easier, more
efficient, and simpler for distributing your application.</p><p>The functions created by either approach are identical in terms of the
arguments they accept and the value they return.  As a result you
should be able to change approaches without modifying much of your
code.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Quick_.Start)"></a>Quick Start</h3><p>Let&rsquo;s say you simply want to use one of the Google web services.</p><p>1. If you don&rsquo;t already have one, get an API key from Google&rsquo;s
<a href="https://code.google.com/apis/console/">API Console</a>.</p><p>2. Put your Google API key in a <span class="stt">.google-api-key</span> file in your home
directory (On Unix and OSX: <span class="stt">~/.google-api-key</span>.)</p><p>3. Find the name of the discovery document corresponding to the
service you want to use; see <a href="#(part._service-docs)" pltdoc="x">Available service documents</a>.  For example,
you want to use the goo.gl URL shortener service, and find that its
name is <span class="stt">urlshortener.v1.js</span>.</p><p>4. Use <span class="RktSym"><a href="#(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))" class="RktStxLink" pltdoc="x">require-gapi-doc</a></span> to define Racket functions. For
instance:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gapi/macro</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))" class="RktStxLink" pltdoc="x">require-gapi-doc</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"urlshortener.v1.js"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>5. Use the resulting functions to make requests to the service.</p><p>For example:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;;</span><span class="hspace">&nbsp;</span><span class="RktCmt">Use</span><span class="hspace">&nbsp;</span><span class="RktCmt">goo.gl</span><span class="hspace">&nbsp;</span><span class="RktCmt">to</span><span class="hspace">&nbsp;</span><span class="RktCmt">make</span><span class="hspace">&nbsp;</span><span class="RktCmt">a</span><span class="hspace">&nbsp;</span><span class="RktCmt">short</span><span class="hspace">&nbsp;</span><span class="RktCmt">URI</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">js</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">urlshortener-url-insert</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:longUrl</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"http://www.racket-lang.org/"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/dicts.html#(def._((lib._racket%2Fdict..rkt)._dict-ref))" class="RktValLink" pltdoc="x">dict-ref</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">js-insert</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">'</a></span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><p>In this example, the <span class="RktSym">urlshortener-url-insert</span> procedure was
defined when you did <span class="RktPn">(</span><span class="RktSym"><a href="#(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))" class="RktStxLink" pltdoc="x">require-gapi-doc</a></span><span class="stt"> </span><span class="RktVal">"urlshortener.v1.js"</span><span class="RktPn">)</span>
in step 4.</p><p>Documentation of the functions defined for each service can be found
using the links in <a href="#(part._service-docs)" pltdoc="x">Available service documents</a>.</p><p>In general the web services will return JSON which is parsed and
returned to you as a <span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span> via the Racket <span class="RktSym">json</span>
collection.</p><h3>3<tt>&nbsp;</tt><a name="(part._.General)"></a><a name="(mod-path._(planet._gh/gapi~3a1~3a~3d0))"></a>General</h3><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._planet))" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gh/gapi:1:=0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>These are provided by both the <span class="RktSym">gapi/dynamic</span> and
<span class="RktSym">gapi/macro</span> modules.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gh._gapi..plt._1._0))._api-key))"></a><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._api-key))" class="RktValLink" pltdoc="x">api-key</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._api-key))" class="RktValLink" pltdoc="x">api-key</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Your Google API key.</div></p><p>Get an API key from Google&rsquo;s
<a href="https://code.google.com/apis/console/">API Console</a>.</p><p>Put your Google API key in a <span class="stt">~/.google-api-key</span> file.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gh._gapi..plt._1._0))._list-services))"></a><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._list-services))" class="RktValLink" pltdoc="x">list-services</a></span></span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktVar">name</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:label</span><span class="hspace">&nbsp;</span><span class="RktVar">label</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:only-preferred?</span><span class="hspace">&nbsp;</span><span class="RktVar">only-preferred?</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/data-structure-contracts.html#(def._((lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt)._or%2Fc))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">N/A</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">N/A</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">label</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/data-structure-contracts.html#(def._((lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt)._or%2Fc))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">N/A</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">N/A</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">only-preferred?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#t</span></td></tr></table></blockquote></div><div class="SIntrapara">Make a request to the Google API Discovery service to list available
services. Supplying <span class="RktVal">#t</span> for <span class="RktVar">only-preferred?</span> limits
the results to non-deprecated services or only the latest version of
services.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gh._gapi..plt._1._0))._get-discovery-document))"></a><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._get-discovery-document))" class="RktValLink" pltdoc="x">get-discovery-document</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">ver</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ver</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Get the discovery document for the service <span class="RktVar">name</span> and
<span class="RktVar">ver</span>. Parse the JSON discovery document using
<span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._bytes-~3ejsexpr))" class="RktValLink" pltdoc="x">bytes-&gt;jsexpr</a></span> and return the resultng <span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gh._gapi..plt._1._0))._download-discovery-document))"></a><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._download-discovery-document))" class="RktValLink" pltdoc="x">download-discovery-document</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">ver</span><span class="hspace">&nbsp;</span>[<span class="RktVar">path</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/data-structure-contracts.html#(form._((lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ver</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/Manipulating_Paths.html#(def._((lib._racket%2Fprivate%2Fmisc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string-append))" class="RktValLink" pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVal">".js"</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Download the discovery document for the service <span class="RktVar">name</span> and
<span class="RktVar">ver</span> to the local file <span class="RktVar">path</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((planet._main..rkt._(gh._gapi..plt._1._0))._load-discovery-document))"></a><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._load-discovery-document))" class="RktValLink" pltdoc="x">load-discovery-document</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/Manipulating_Paths.html#(def._((lib._racket%2Fprivate%2Fmisc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Load the discovery document.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((planet._main..rkt._(gh._gapi..plt._1._0))._paged))"></a><span title="Provided from: (planet gh/gapi:1:=0)"><span class="RktSym"><a href="#(form._((planet._main..rkt._(gh._gapi..plt._1._0))._paged))" class="RktStxLink" pltdoc="x">paged</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">function</span><span class="hspace">&nbsp;</span><span class="RktVar">arguments</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Make repeated calls to <span class="RktVar">function</span> with <span class="RktVar">arguments</span> if
necessary to obtain additional results. If the web service includes a
<span class="stt">nextPageToken</span> value in the results&#8212;<wbr></wbr>indicating that more results
are available&#8212;<wbr></wbr>then <span class="RktVar">function</span> is called again with
<span class="RktVar">arguments</span> plus the additional argument
<span class="RktPn">#:pageToken</span>. This repeats until the service no longer returns
a <span class="stt">nextPageToken</span>.  In the returned <span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span>, the total
results are appended into the value for the <span class="RktVal">'</span><span class="RktVal">items</span> key.</div></p><p>Keep in mind that you may <span style="font-style: italic">want</span> to make the calls individually
and process the results in small batches. You may want to do this if
the total results might be too large to fit in memory, or if you are
relaying the results to some other web service that would prefer to
take them in small batches, too.  However if you really want the
results accumuluated for you, use this form.</p><h3>4<tt>&nbsp;</tt><a name="(part._.Macro)"></a><a name="(mod-path._(planet._gh/gapi~3a1~3a~3d0/macro))"></a>Macro</h3><p>The simplest approach creates wrapper functions for the web service at
compile time. This reduces startup time for your
application. Furthermore, it means that you don&rsquo;t need to ship the
service documents&#8212;<wbr></wbr>they are "source code" just like your <span class="stt">.rkt</span>
files.</p><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._planet))" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gh/gapi:1:=0/macro</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))"></a><span title="Provided from: (planet gh/gapi:1:=0/macro)"><span class="RktSym"><a href="#(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))" class="RktStxLink" pltdoc="x">require-gapi-doc</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">discovery-document-name</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines functions respresenting the web service defined by the JSON
file named <span class="RktVar">discovery-document-name</span>.</div></p><p>Each function makes an HTTP request to the web service. The function
takes normal arguments for parameters that are defined as required,
whereas optional keyword arguments are used to represent other
parameters. These values are supplied in the HTTP request to the service.</p><p>The web service responds with JSON, which is returned by this function
as a <span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span>. This library doesn&rsquo;t try to marshal the
response into structs. Instead you will need to understand its format
and retrieve the information, for example <span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" class="RktValLink" pltdoc="x">hash-ref</a></span><span class="stt"> </span><span class="RktSym">js</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">items</span><span class="RktPn">)</span> if the response contains a list of items.</p><p>As a convenience, the <span class="RktPn">#:key</span> argument (which corresponds to
the <span class="stt">key</span> query parameter in the HTTP request) defaults to the
<span class="RktSym"><a href="#(def._((planet._main..rkt._(gh._gapi..plt._1._0))._api-key))" class="RktValLink" pltdoc="x">api-key</a></span> Racket parameter. Put your Google API key in a file
named <span class="stt">.google-api-key</span> in your home directory&ndash;in other words,
<span class="stt">~/.google-api-key</span>.</p><p>As another convenience, see the <span class="RktSym"><a href="#(form._((planet._main..rkt._(gh._gapi..plt._1._0))._paged))" class="RktStxLink" pltdoc="x">paged</a></span> form which simplifies
making repeated calls to a service that returns results in small
"pages" (batches of results).</p><p>If <span class="RktVar">discovery-document-name</span> is a fully qualified pathname,
then it will be loaded.</p><p>Otherwise if <span class="RktVar">discovery-document-name</span> has no path (i.e. if
<span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/More_Path_Utilities.html#(def._((lib._racket%2Fpath..rkt)._path-only))" class="RktValLink" pltdoc="x">path-only</a></span> returns <span class="RktVal">#f</span>) then it must be located in the
<span class="stt">vendor</span> subdirectory of the GAPI collection. The currently
available service documents are:</p><h4>4.1<tt>&nbsp;</tt><a name="(part._service-docs)"></a>Available service documents</h4><ul><li><p><a href="adexchangebuyer.v1.1.js.html">adexchangebuyer.v1.1.js</a> : Lets you manage your Ad Exchange Buyer account.</p></li><li><p><a href="adsense.v1.1.js.html">adsense.v1.1.js</a> : Gives AdSense publishers access to their inventory and the ability to generate reports</p></li><li><p><a href="adsensehost.v4.1.js.html">adsensehost.v4.1.js</a> : Gives AdSense Hosts access to report generation, ad code generation, and publisher management capabilities.</p></li><li><p><a href="analytics.v3.js.html">analytics.v3.js</a> : View and manage your Google Analytics data</p></li><li><p><a href="androidpublisher.v1.js.html">androidpublisher.v1.js</a> : Lets Android application developers access their Google Play accounts.</p></li><li><p><a href="audit.v1.js.html">audit.v1.js</a> : Lets you access user activities in your enterprise made through various applications.</p></li><li><p><a href="bigquery.v2.js.html">bigquery.v2.js</a> : A data platform for customers to create, manage, share and query data.</p></li><li><p><a href="blogger.v3.js.html">blogger.v3.js</a> : API for access to the data within Blogger.</p></li><li><p><a href="books.v1.js.html">books.v1.js</a> : Lets you search for books and manage your Google Books library.</p></li><li><p><a href="calendar.v3.js.html">calendar.v3.js</a> : Lets you manipulate events and other calendar data.</p></li><li><p><a href="civicinfo.us_v1.js.html">civicinfo.us_v1.js</a> : An API for accessing civic information.</p></li><li><p><a href="compute.v1beta12.js.html">compute.v1beta12.js</a> : API for the Google Compute Engine service.</p></li><li><p><a href="coordinate.v1.js.html">coordinate.v1.js</a> : Lets you view and manage jobs in a Coordinate team.</p></li><li><p><a href="customsearch.v1.js.html">customsearch.v1.js</a> : Lets you search over a website or collection of websites</p></li><li><p><a href="dfareporting.v1.1.js.html">dfareporting.v1.1.js</a> : Lets you create, run and download reports.</p></li><li><p><a href="discovery.v1.js.html">discovery.v1.js</a> : Lets you discover information about other Google APIs, such as what APIs are available, the resource and method details for each API</p></li><li><p><a href="drive.v2.js.html">drive.v2.js</a> : The API to interact with Drive.</p></li><li><p><a href="freebase.v1.js.html">freebase.v1.js</a> : Lets you access the Freebase repository of open data.</p></li><li><p><a href="fusiontables.v1.js.html">fusiontables.v1.js</a> : API for working with Fusion Tables data.</p></li><li><p><a href="gan.v1beta1.js.html">gan.v1beta1.js</a> : Lets you have programmatic access to your Google Affiliate Network data.</p></li><li><p><a href="groupssettings.v1.js.html">groupssettings.v1.js</a> : Lets you manage permission levels and related settings of a group.</p></li><li><p><a href="latitude.v1.js.html">latitude.v1.js</a> : Lets you read and update your current location and work with your location history</p></li><li><p><a href="licensing.v1.js.html">licensing.v1.js</a> : Licensing API to view and manage license for your domain.</p></li><li><p><a href="moderator.v1.js.html">moderator.v1.js</a> : Moderator API</p></li><li><p><a href="oauth2.v2.js.html">oauth2.v2.js</a> : Lets you access OAuth2 protocol related APIs.</p></li><li><p><a href="orkut.v2.js.html">orkut.v2.js</a> : Lets you manage activities, comments and badges in Orkut. More stuff coming in time.</p></li><li><p><a href="pagespeedonline.v1.js.html">pagespeedonline.v1.js</a> : Lets you analyze the performance of a web page and get tailored suggestions to make that page faster.</p></li><li><p><a href="plus.v1.js.html">plus.v1.js</a> : The Google+ API enables developers to build on top of the Google+ platform.</p></li><li><p><a href="prediction.v1.5.js.html">prediction.v1.5.js</a> : Lets you access a cloud hosted machine learning service that makes it easy to build smart apps</p></li><li><p><a href="reseller.v1.js.html">reseller.v1.js</a> : Lets you create and manage your customers and their subscriptions.</p></li><li><p><a href="shopping.v1.js.html">shopping.v1.js</a> : Lets you search over product data.</p></li><li><p><a href="siteVerification.v1.js.html">siteVerification.v1.js</a> : Lets you programatically verify ownership of websites or domains with Google.</p></li><li><p><a href="storage.v1beta1.js.html">storage.v1beta1.js</a> : Lets you store and retrieve potentially-large, immutable data objects.</p></li><li><p><a href="taskqueue.v1beta2.js.html">taskqueue.v1beta2.js</a> : Lets you access a Google App Engine Pull Task Queue over REST.</p></li><li><p><a href="tasks.v1.js.html">tasks.v1.js</a> : Lets you manage your tasks and task lists.</p></li><li><p><a href="translate.v2.js.html">translate.v2.js</a> : Lets you translate text from one language to another</p></li><li><p><a href="urlshortener.v1.js.html">urlshortener.v1.js</a> : Lets you create, inspect, and manage goo.gl short URLs</p></li><li><p><a href="webfonts.v1.js.html">webfonts.v1.js</a> : The Google Web Fonts Developer API.</p></li><li><p><a href="youtube.v3.js.html">youtube.v3.js</a> : Programmatic access to YouTube features.</p></li><li><p><a href="youtubeAnalytics.v1.js.html">youtubeAnalytics.v1.js</a> : Retrieve your YouTube Analytics reports.</p></li></ul><p>Example:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">gapi/macro</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))" class="RktStxLink" pltdoc="x">require-gapi-doc</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"urlshortener.v1.js"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">orig-url</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"http://www.racket-lang.org/"</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">js-insert</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">urlshortener-url-insert</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:longUrl</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">orig-url</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">short-url</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/dicts.html#(def._((lib._racket%2Fdict..rkt)._dict-ref))" class="RktValLink" pltdoc="x">dict-ref</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">js-insert</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">'</a></span><span class="RktSym">id</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">js-get</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">urlshortener-url-get</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">short-url</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/define.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">long-url</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/dicts.html#(def._((lib._racket%2Fdict..rkt)._dict-ref))" class="RktValLink" pltdoc="x">dict-ref</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">js-get</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">'</a></span><span class="RktSym">longUrl</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"~s</span><span class="hspace">&nbsp;</span><span class="RktVal">was</span><span class="hspace">&nbsp;</span><span class="RktVal">shortened</span><span class="hspace">&nbsp;</span><span class="RktVal">to</span><span class="hspace">&nbsp;</span><span class="RktVal">~s,</span><span class="hspace">&nbsp;</span><span class="RktVal">which</span><span class="hspace">&nbsp;</span><span class="RktVal">expanded</span><span class="hspace">&nbsp;</span><span class="RktVal">back</span><span class="hspace">&nbsp;</span><span class="RktVal">to</span><span class="hspace">&nbsp;</span><span class="RktVal">~s:</span><span class="hspace">&nbsp;</span><span class="RktVal">~a"</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktSym">orig-url</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">short-url</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">long-url</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">orig-url</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">long-url</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Yay!"</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"Boo!"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote><h3>5<tt>&nbsp;</tt><a name="(part._.Dynamic)"></a><a name="(mod-path._(planet._gh/gapi~3a1~3a~3d0/dynamic))"></a>Dynamic</h3><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._planet))" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gh/gapi:1:=0/dynamic</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>Another way to use the API discovery service is to query it at
runtime, or to parse a locally-stored discovery file at runtime. This
may be desirable if you want to be able to discover newly-added
services, for example.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))"></a><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/data-structure-contracts.html#(def._((lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt)._any%2Fc))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a service, <span class="RktVal">#f</span> otherwise.</div></p><p>A <span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span> is a <span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span> to which procedures have
been added.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._discovery-document-~3eservice))"></a><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._discovery-document-~3eservice))" class="RktValLink" pltdoc="x">discovery-document-&gt;service</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">discovery-document</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">discovery-document</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Create a <span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span> object representing the web service defined
by the JSON provided as a <span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/json/index.html#(def._((lib._json%2Fmain..rkt)._jsexpr~3f))" class="RktValLink" pltdoc="x">jsexpr?</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._local-discovery-document-~3eservice))"></a><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._local-discovery-document-~3eservice))" class="RktValLink" pltdoc="x">local-discovery-document-&gt;service</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">filename</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">filename</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/Manipulating_Paths.html#(def._((lib._racket%2Fprivate%2Fmisc..rkt)._path-string~3f))" class="RktValLink" pltdoc="x">path-string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Create a <span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span> object representing the web service defined
by the JSON file <span class="RktVar">filename</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._online-discovery-document-~3eservice))"></a><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._online-discovery-document-~3eservice))" class="RktValLink" pltdoc="x">online-discovery-document-&gt;service</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">name</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ver</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ver</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Create a <span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span> object representing the web service defined
by the name and version, which is fetched via HTTP from the Google API
Discovery service.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._method-proc))"></a><span title="Provided from: (planet gh/gapi:1:=0/dynamic)"><span class="RktSym"><span class="badlink"><span class="RktValLink">method-proc</span></span></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">service</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">resource-name</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">method-name</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">service</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">resource-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">method-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Given a <span class="RktSym"><a href="#(def._((planet._dynamic..rkt._(gh._gapi..plt._1._0))._service~3f))" class="RktValLink" pltdoc="x">service?</a></span>, <span class="RktVar">resource-name</span>, and
<span class="RktVar">method-name</span>, get a procedure that makes HTTP requests to the
service.</div></p><p>The procedure returned by <span class="RktSym"><span class="badlink"><span class="RktValLink">method-proc</span></span></span> is like that created by
<span class="RktSym"><a href="#(form._((planet._macro..rkt._(gh._gapi..plt._1._0))._require-gapi-doc))" class="RktStxLink" pltdoc="x">require-gapi-doc</a></span>; see that for more information.</p><h3>6<tt>&nbsp;</tt><a name="(part._.Generating__.R.K.T_files)"></a><a name="(mod-path._(planet._gh/gapi~3a1~3a~3d0/code-generate))"></a>Generating .RKT files</h3><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pre.plt-scheme.org/docs/html/reference/require.html#(form._((lib._racket%2Fprivate%2Fbase..rkt)._planet))" class="RktStxLink" pltdoc="x">planet</a></span><span class="stt"> </span><span class="RktSym">gh/gapi:1:=0/code-generate</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></p><p>This approach is deprecated and may be removed.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>